function SetSelectHour() {
    $("#hourPicker").html("");
    var str = "";
    str += '<option disabled selected value="0">Chọn giờ</option>';
    var dateVal = $("#inputDate").val(),
        today = new Date,
        dd = today.getDate(),
        mm = today.getMonth() + 1,
        yyyy = today.getFullYear(),
        nextdd = dd + 1;
    10 > dd && (dd = "0" + dd), 10 > nextdd && (nextdd = "0" + nextdd), 10 > mm && (mm = "0" + mm);
    var stoday = dd + "/" + mm + "/" + yyyy,
        stodaynext = nextdd + "/" + mm + "/" + yyyy;
    CheckIfIsMobile() && (stoday = yyyy + "-" + mm + "-" + dd, stodaynext = yyyy + "-" + mm + "-" + nextdd);
    var hh = today.getHours(),
        m = today.getMinutes();
    if (m > 45 ? (hh += 1, m = 0) : m > 15 ? (hh = hh, m = 30) : m = 0, dateVal == stoday) 7 >= hh && 0 == m ? (str += '<option value="08:00">08:00</option>', str += '<option value="09:00">09:00</option>', str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 7 >= hh && 30 == m ? (str += '<option value="08:00">08:00</option>', str += '<option value="09:00">09:00</option>', str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 8 >= hh && 0 == m ? (str += '<option value="09:00">09:00</option>', str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 8 >= hh && 30 == m ? (str += '<option value="09:00">09:00</option>', str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 9 >= hh && 0 == m ? (str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 9 >= hh && 30 == m ? (str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 10 >= hh && 0 == m ? (str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 10 >= hh && 30 == m ? (str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 11 >= hh && 0 == m ? (str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : 11 >= hh && 30 == m && (str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>');
    else {
        var dateParts = dateVal.split("/"),
            day = dateParts[0],
            month = dateParts[1],
            year = dateParts[2];
        CheckIfIsMobile() && (dateParts = dateVal.split("-"), day = dateParts[2], month = dateParts[1], year = dateParts[0]), yyyy > year || (yyyy = year && mm > month) || (yyyy = year && mm == month && dd > day) || (hh > 16 && dateVal == stodaynext ? (str += '<option value="09:00">09:00</option>', str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>') : (str += '<option value="08:00">08:00</option>', str += '<option value="09:00">09:00</option>', str += '<option value="10:00">10:00</option>', str += '<option value="11:00">11:00</option>', str += '<option value="13:00">13:00</option>', str += '<option value="14:00">14:00</option>', str += '<option value="15:00">15:00</option>', str += '<option value="16:00">16:00</option>', str += '<option value="17:00">17:00</option>'))
    }
    $("#hourPicker").html(str), $("#hourPicker").material_select()
}
$(document).ready(function() {
    $(".dealername").text($("#hdDeAName").val());
    var lstCat = $(".chkCats:checked");
    if (lstCat.length > 0 && ($(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $(".dangkydichvu_tabs .tabs_lg li:nth-of-type(2) a").click()), $(".dangkydichvu_tabs .next_btn_0").on("click", function() {
            $(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $(".dangkydichvu_tabs .tabs_lg li:nth-of-type(1) a").click()
        }), $(".dangkydichvu_tabs .next_btn_1").on("click", function() {
            $(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $(".dangkydichvu_tabs .tabs_lg li:nth-of-type(2) a").click()
        }), $(".dangkydichvu_tabs li:not(.disabled).tab a").on("click", function() {
            $(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none")
        }), $(".dangkydichvu_tabs .next_btn_2").on("click", function() {
            $(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $(".dangkydichvu_tabs .tabs_lg li:nth-of-type(3) a").click()
        }), $(".dangkydichvu_tabs .next_btn_3").on("click", function() {
            $(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $(".dangkydichvu_tabs .tabs_lg li:nth-of-type(4) a").click()
        }), CheckIfIsMobile()) {
        var today = new Date,
            dd = today.getDate(),
            mm = today.getMonth() + 1,
            yyyy = today.getFullYear(),
            hh = today.getHours();
        10 > dd && (dd = "0" + dd), 10 > mm && (mm = "0" + mm), hh > 12 && (dd += 1), today = yyyy + "-" + mm + "-" + dd, $("#setinputDate").html("");
        var str = "";
        str += '<input id="inputDate" type="date" name="date" min="' + today + '" class="input input_cld">', $("#setinputDate").html(str)
    } else {
        $("#setinputDate").html("");
        var str = "";
        str += '<input id="inputDate" type="text" class="input datepicker1 input_cld">', str += '<label for="inputDate"></label>', $("#setinputDate").html(str);
        var today = new Date,
            dd = today.getDate(),
            mm = today.getMonth(),
            yyyy = today.getFullYear(),
            hh = today.getHours();
        hh > 12 && (dd += 1), $("#inputDate").pickadate({
            labelMonthNext: "Tháng kế",
            labelMonthPrev: "Tháng trước",
            labelMonthSelect: "Chọn tháng",
            labelYearSelect: "Chọn năm",
            monthsFull: ["Tháng 1", "Tháng 2", "Tháng 3", "Tháng 4", "Tháng 5", "Tháng 6", "Tháng 7", "Tháng 8", "Tháng 9", "Tháng 10", "Tháng 11", "Tháng 12"],
            monthsShort: ["Tháng 1", "Tháng 2", "Tháng 3", "Tháng 4", "Tháng 5", "Tháng 6", "Tháng 7", "Tháng 8", "Tháng 9", "Tháng 10", "Tháng 11", "Tháng 12"],
            weekdaysFull: ["Chủ nhật", "Thứ hai", "Thứ ba", "Thứ tư", "Thứ năm", "Thứ sáu", "Thứ bảy"],
            weekdaysShort: ["CN", "T-2", "T-3", "T-4", "T-5", "T-6", "T-7"],
            weekdaysLetter: ["CN", "T2", "T3", "T4", "T5", "T6", "T7"],
            format: "dd/mm/yyyy",
            onSet: function(e) {
                e.select && this.close()
            },
            min: new Date(yyyy, mm, dd)
        })
    }
    $(".datepicker1").on("change", function() {}), $("#hourPicker").on("change", function() {}), $(".datepicker2").on("change", function() {
        var dateVal = $("#inputDate2").val(),
            dateParts = dateVal.split("/"),
            day = dateParts[0],
            month = dateParts[1],
            year = dateParts[2],
            date = (parseInt(day) < 10 ? "0" + parseInt(day) : parseInt(day)) + "." + (parseInt(month) < 10 ? "0" + parseInt(month) : parseInt(month)) + "." + parseInt(year);
        (null == dateVal || "" == dateVal) && (date = "");
        var hour = $("#hourPicker2").val(),
            time = hour + "h ";
        (null == hour || "" == hour) && (time = ""), $("#sptimeSelect2").text(time + " " + date)
    }), $("#hourPicker2").on("change", function() {
        var dateVal = $("#inputDate2").val(),
            dateParts = dateVal.split("/"),
            day = dateParts[0],
            month = dateParts[1],
            year = dateParts[2],
            date = (parseInt(day) < 10 ? "0" + parseInt(day) : parseInt(day)) + "." + (parseInt(month) < 10 ? "0" + parseInt(month) : parseInt(month)) + "." + parseInt(year);
        (null == dateVal || "" == dateVal) && (date = "");
        var hour = $("#hourPicker2").val(),
            time = hour + "h ";
        (null == hour || "" == hour) && (time = ""), $("#sptimeSelect2").text(time + " " + date)
    }), $("#hourPicker").on("change", function() {
        $("#spHour").text($(this).val())
    }), $("#minutePicker").on("change", function() {
        $("#spMinute").text($(this).val())
    }), $("#hourPicker2").on("change", function() {
        $("#spHour2").text($(this).val())
    }), $("#minutePicker2").on("change", function() {
        $("#spMinute2").text($(this).val())
    }), $("#ddlAdrress").on("change", function() {
        var add = $(this).find(":selected").data("add");
        $("#lbAdd").text(add)
    }), $("#selectCats").on("change", function() {
        var api = $("#hdApiUrl").val(),
            catId = $(this).find(":selected").data("id"),
            idDlr = $("#hdIdlr").val(),
            awesomeToyota = $("#hd__ToyotaDealerProject").val();
        $.ajax({
            url: api + "/api/Detail/Load_Products_ByCatId?catId=" + catId + "&idDlr=" + idDlr,
            type: "GET",
            headers: {
                Authorization: "X-XSRF-Token " + awesomeToyota,
                "X-XSRF-Token": awesomeToyota,
                "Content-Type": "application/json"
            },
            success: function(data) {
                $("#selectModelCar").html("");
                var str = "";
                str += '<option disabled selected value="">Chọn phiên bản</option>', $.each(data, function(i, item) {
                    str += '<option value="' + item.newS_TITLE + '">' + item.newS_TITLE + "</option>"
                }), str += '<option value="Khác">Khác</option>', $("#selectModelCar").html(str), $("#selectModelCar").material_select()
            }
        })
    }), $(".step1 input[type='checkbox']").on("click", function() {
        var c = $(this).is(":checked"),
            id = $(this).data("idcat"),
            style = c === !0 ? "" : "none";
        $(".step2").find("li[data-id='" + id + "']").css("display", style), $(".step3").find("li[data-id='" + id + "']").css("display", style), $(".step4").find("li[data-id='" + id + "']").css("display", style), $(".step2").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step3").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step4").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c)
    }), $(".step2 input[type='checkbox']").on("click", function() {
        var c = $(this).is(":checked"),
            id = $(this).data("idcat"),
            style = c === !0 ? "" : "none";
        $(".step2").find("li[data-id='" + id + "']").css("display", style), $(".step3").find("li[data-id='" + id + "']").css("display", style), $(".step4").find("li[data-id='" + id + "']").css("display", style), $(".step1").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step3").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step4").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c)
    }), $(".step3 input[type='checkbox']").on("click", function() {
        var c = $(this).is(":checked"),
            id = $(this).data("idcat"),
            style = c === !0 ? "" : "none";
        $(".step2").find("li[data-id='" + id + "']").css("display", style), $(".step3").find("li[data-id='" + id + "']").css("display", style), $(".step4").find("li[data-id='" + id + "']").css("display", style), $(".step1").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step2").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step4").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c)
    }), $(".step4 input[type='checkbox']").on("click", function() {
        var c = $(this).is(":checked"),
            id = $(this).data("idcat"),
            style = c === !0 ? "" : "none";
        $(".step2").find("li[data-id='" + id + "']").css("display", style), $(".step3").find("li[data-id='" + id + "']").css("display", style), $(".step4").find("li[data-id='" + id + "']").css("display", style), $(".step1").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step2").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c), $(".step3").find("li[data-id='" + id + "']").find("input[data-idcat='" + id + "']").prop("checked", c)
    }), $("#inputEmail").on("blur", function() {
        $("#spEmail").text($(this).val())
    }), $(".complete2").on("click", function() {
        if (CheckValue01ServiceRegister()) {
            $(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $("a[href*='tab_dangkydichvu_02']").addClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $("#tab_dangkydichvu_02").css("display", "block");
            var branchId = getSessionBranchId();
            if (null != branchId && branchId > 0 && null == $("#ddlAdrress").val()) {
                $("#ddlAdrress option").removeAttr("selected");
                var value = $("#ddlAdrress option[data-branchid='" + branchId + "']").val();
                $("#ddlAdrress").val(value), $("#ddlAdrress").material_select("destroy"), $("#ddlAdrress").material_select()
            }
        }
    }), $(".dangkydichvu_tabs .next_btn_1").on("click", function() {
        CheckValue01ServiceRegister() && ($(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $("a[href*='tab_dangkydichvu_02']").addClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $("#tab_dangkydichvu_02").css("display", "block"))
    }), $(".complete3").on("click", function() {
        CheckValue01ServiceRegister() && CheckValue02ServiceRegister() && ($(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $("a[href*='tab_dangkydichvu_03']").addClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $("#tab_dangkydichvu_03").css("display", "block"))
    }), $(".dangkydichvu_tabs .next_btn_2").on("click", function() {
        CheckValue01ServiceRegister() && CheckValue02ServiceRegister() && ($(".dangkydichvu_tabs .tab").find("a").removeClass("active"), $("a[href*='tab_dangkydichvu_03']").addClass("active"), $(".dangkydichvu_tabs .content-tab").css("display", "none"), $("#tab_dangkydichvu_03").css("display", "block"))
    }), $(".complete").on("click", function() {
        CheckValue01ServiceRegister() && CheckValue02ServiceRegister() && CheckValue03ServiceRegister() && $("#SeviceRegisterInTools").submit()
    }), $(".btnSend").on("click", function() {
        CheckValue01ServiceRegister() && CheckValue02ServiceRegister() && CheckValue03ServiceRegister() && $("#SeviceRegisterInTools").submit()
    }), SetSelectHour(), $("#inputDate").on("change", function() {
        SetSelectHour()
    })
});
